"use strict";(self.webpackChunkessentialist=self.webpackChunkessentialist||[]).push([[614],{7614:(G,C,o)=>{o.r(C),o.d(C,{DashboardModule:()=>X});var u=o(2302),t=o(5e3),g=o(6727),M=o(2654),f=o(1294),x=o(7003),p=o(5439),O=o(3261),_=o(8341),v=o(1377),D=o(1279),h=o(2466),l=o(9808);let y=(()=>{class n{constructor(){this.title=""}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-header-trip"]],inputs:{trip:"trip",title:"title"},decls:13,vars:14,consts:[[1,"header-trip-container"],[1,"information-container","d-flex","flex-column","align-items-start","justify-content-center","w-100"],[1,"mat-subheading-2"],[1,"mat-display-4","m-0"],[1,"mat-subheading-2","fst-italic"],[1,"fst-italic"]],template:function(e,i){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"p",2),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"h1",3),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"uppercase"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"h2",4),t.\u0275\u0275text(9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"h2",5),t.\u0275\u0275text(11),t.\u0275\u0275pipe(12,"translate"),t.\u0275\u0275elementEnd()()()),2&e&&(t.\u0275\u0275styleMapInterpolate1("background-image: url(",i.trip.image,")"),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,8,i.title)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(7,10,i.trip.title)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(i.trip.summary_date),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate2("",i.trip.adults+i.trip.children+i.trip.infants," ",t.\u0275\u0275pipeBind1(12,12,"content.people"),""))},pipes:[h.X$,l.UpperCasePipe],styles:[".header-trip-container[_ngcontent-%COMP%]{position:relative;background-size:100% 560px;background-position:center top;background-repeat:no-repeat;padding:0 60px}.information-container[_ngcontent-%COMP%]{height:560px;color:var(--color-text-secondary);word-break:break-word;text-shadow:0 1px var(--color-text-primary)}@media (max-width: 992px){.header-trip-container[_ngcontent-%COMP%]{background-size:100% 360px;padding:0 12px}.information-container[_ngcontent-%COMP%]{height:360px;justify-content:end!important}.information-container[_ngcontent-%COMP%]   h1.mat-display-4.m-0[_ngcontent-%COMP%]{font-size:40px;line-height:60px}}"]}),n})();const P=["dialog"];function w(n,a){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"header",1)(1,"div",2)(2,"button",3),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().close()}),t.\u0275\u0275elementStart(3,"mat-icon",4),t.\u0275\u0275text(4,"close"),t.\u0275\u0275elementEnd()()()(),t.\u0275\u0275elementStart(5,"mat-dialog-content",5),t.\u0275\u0275element(6,"app-header-trip",6),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("disableRipple",!0),t.\u0275\u0275advance(4),t.\u0275\u0275property("trip",e.trip)}}let S=(()=>{class n{constructor(e){this.matDialog=e,this.trip={},this.closeClick=new t.EventEmitter}ngOnInit(){}open(){this.dialogRef=this.matDialog.open(this.dialog,{width:"60vw",height:"82vh",backdropClass:"dialog-trip-container"})}close(){this.closeClick.emit(),this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(_.uw))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-dialog-trip"]],viewQuery:function(e,i){if(1&e&&t.\u0275\u0275viewQuery(P,7),2&e){let r;t.\u0275\u0275queryRefresh(r=t.\u0275\u0275loadQuery())&&(i.dialog=r.first)}},inputs:{trip:"trip"},outputs:{closeClick:"closeClick"},decls:2,vars:0,consts:[["dialog",""],[1,"pb-2"],[1,"d-flex","justify-content-end"],["mat-icon-button","",3,"disableRipple","click"],[1,"material-symbols-outlined"],[1,"h-100"],[3,"trip"]],template:function(e,i){1&e&&t.\u0275\u0275template(0,w,7,2,"ng-template",null,0,t.\u0275\u0275templateRefExtractor)},directives:[v.lW,D.Hw,_.xY,y],encapsulation:2}),n})();var I=o(4984);let k=(()=>{class n{constructor(){}convertDates(e,i){let r="";return r=p(e).year()===p(i).year()?p(e).month()===p(i).month()?`${p(e).format("MMMM Do")} to ${p(i).format("Do, YYYY")}`:`${p(e).format("MMMM Do")} to ${p(i).format("MMMM Do, YYYY")}`:`${p(e).format("MMMM Do, YYYY")} to ${p(i).format("MMMM Do, YYYY")}`,r}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var c=o(2930);let B=(()=>{class n{constructor(){this.addClick=new t.EventEmitter}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-card-add-trip"]],outputs:{addClick:"addClick"},decls:9,vars:8,consts:[[1,"add-trip-container"],[1,"d-flex","flex-column","align-items-center","justify-content-center","h-100","px-4"],[1,"mat-display-1","text-center","my-2"],["mat-stroked-button","","color","primary",3,"click"]],template:function(e,i){1&e&&(t.\u0275\u0275elementStart(0,"mat-card",0)(1,"mat-card-content",1)(2,"h1",2),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"button",3),t.\u0275\u0275listener("click",function(){return i.addClick.emit()}),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"uppercase"),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275elementEnd()()()),2&e&&(t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(4,2,"content.next-trip")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(7,4,t.\u0275\u0275pipeBind1(8,6,"content.add-trip"))," "))},directives:[c.a8,c.dn,v.lW],pipes:[h.X$,l.UpperCasePipe],styles:[".add-trip-container[_ngcontent-%COMP%]{background:var(--color-background-secondary);height:380px;border-radius:0;border:1px solid var(--color-border-secondary);margin:0 16px;padding:0}@media (max-width: 768px){.add-trip-container[_ngcontent-%COMP%]{height:300px;margin:0 8px}}@media (min-width: 768px) and (max-width: 992px){.add-trip-container[_ngcontent-%COMP%]{height:340px;margin:0 12px}}"]}),n})();var T=o(3493);let E=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-card-trip"]],inputs:{trip:"trip"},decls:14,vars:10,consts:[[1,"d-flex","align-items-center","justify-content-center"],["mat-card-xl-image","",1,"w-100",3,"src"],[1,"mat-subheading-1","pt-3"],[1,"mat-display-1","my-2"],[1,"mat-subheading-2","m-0"],[1,"mat-subheading-2"]],template:function(e,i){1&e&&(t.\u0275\u0275elementStart(0,"mat-card")(1,"div",0),t.\u0275\u0275element(2,"img",1),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"mat-card-subtitle",2),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"uppercase"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"mat-card-title",3),t.\u0275\u0275text(7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"mat-card-content")(9,"p",4),t.\u0275\u0275text(10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"p",5),t.\u0275\u0275text(12),t.\u0275\u0275pipe(13,"translate"),t.\u0275\u0275elementEnd()()()),2&e&&(t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("src",i.trip.image,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(5,6,i.trip.visibility_status)),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(i.trip.title),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(i.trip.summary_date),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate2("",i.trip.adults+i.trip.children+i.trip.infants," ",t.\u0275\u0275pipeBind1(13,8,"content.people"),""))},directives:[c.a8,c.o5,c.$j,c.n5,c.dn],pipes:[l.UpperCasePipe,h.X$],styles:[".mat-card[_ngcontent-%COMP%]{margin:0 16px;padding:0;border-radius:0;box-shadow:none;cursor:pointer}.mat-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mat-card[_ngcontent-%COMP%]   .mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--color-text-tertiary)}@media (max-width: 768px){.mat-card[_ngcontent-%COMP%]{height:300px;margin:0 10px}.mat-card[_ngcontent-%COMP%]   .mat-card-xl-image[_ngcontent-%COMP%]{height:180px}.mat-card[_ngcontent-%COMP%]   .mat-card-content[_ngcontent-%COMP%]{margin-bottom:10px}.mat-card[_ngcontent-%COMP%]   .mat-display-1[_ngcontent-%COMP%]{font-size:24px;line-height:24px}}@media (min-width: 768px) and (max-width: 992px){.mat-card[_ngcontent-%COMP%]{height:340px;margin:0 12px}.mat-card-xl-image[_ngcontent-%COMP%]{height:220px}.mat-card-content[_ngcontent-%COMP%]{margin-bottom:10px}.mat-display-1[_ngcontent-%COMP%]{font-size:24px;line-height:24px}}"]}),n})();var m=o(7030),b=o(8238);const Y=["tripDialog"];function F(n,a){if(1&n&&t.\u0275\u0275element(0,"app-header-trip",13),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("title","content.on-going-trip")("trip",e.onGoingTrip)}}function j(n,a){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"app-card-add-trip",14),t.\u0275\u0275listener("addClick",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().navigateToNewTrip()}),t.\u0275\u0275elementEnd()}}function $(n,a){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"app-card-trip",17),t.\u0275\u0275listener("click",function(){const d=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275nextContext(2).getTripByHash(d.hash)}),t.\u0275\u0275elementEnd()}2&n&&t.\u0275\u0275property("trip",a.$implicit)}const z=function(){return["owl-theme","sliding"]};function H(n,a){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"owl-carousel",15)(1,"app-card-add-trip",14),t.\u0275\u0275listener("addClick",function(){return t.\u0275\u0275restoreView(e),t.\u0275\u0275nextContext().navigateToNewTrip()}),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(2,$,1,1,"app-card-trip",16),t.\u0275\u0275elementEnd()}if(2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275property("options",e.carouselOptions)("carouselClasses",t.\u0275\u0275pureFunction0(4,z)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.upcomingTrips)("ngForTrackBy",e.trackByTrip)}}function R(n,a){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"mat-grid-tile")(1,"app-card-trip",18),t.\u0275\u0275listener("click",function(){const d=t.\u0275\u0275restoreView(e).$implicit;return t.\u0275\u0275nextContext().getTripByHash(d.hash)}),t.\u0275\u0275elementEnd()()}if(2&n){const e=a.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("trip",e)}}function V(n,a){}const Q=[{path:"",component:(()=>{class n{constructor(e,i,r,d){this.tripService=e,this.dateService=i,this.router=r,this.store=d,this.onGoingTrip={},this.upcomingTrips=[],this.pastTrips=[],this.carouselOptions={items:3,dots:!1,nav:!0,slideBy:3},this.panelOpenState=!1,this.columns=3,this.rowHeight="420px",this.isLoading=!1,this.subscriptions=new M.w,this.subscriptions.add(this.store.pipe((0,g.Ys)(x.XS)).subscribe(s=>{console.log("Trips",s),this.organizeTrips(s)})),this.subscriptions.add(this.store.pipe((0,g.Ys)(x.zO)).subscribe(s=>{s.hash&&(s=Object.assign(Object.assign({},s),{summary_date:this.dateService.convertDates(s.departure_date,s.arrival_date)}),this.openDialog(s))})),this.subscriptions.add(this.store.pipe((0,g.Ys)(x.Vy)).subscribe(s=>{this.isLoading=s}))}ngOnInit(){this.setDimensions(window),this.getTrips()}getTrips(){this.store.dispatch((0,f.XS)())}getTripByHash(e){this.store.dispatch((0,f.FK)({hash:e}))}openDialog(e){const i=this.tripDialog.createComponent(S);i.instance.open(),i.instance.trip=e,i.instance.closeClick.subscribe(()=>{this.tripDialog.clear()})}setDimensions(e){const i=e.innerWidth;i<768?(this.refreshDimensions(1,"340px"),this.carouselOptions={items:1,dots:!1,nav:!0,slideBy:1}):i>=768&&i<1300?(this.refreshDimensions(2,"380px"),this.carouselOptions={items:2,dots:!1,nav:!0,slideBy:2}):i>=1300&&i<1860&&(this.refreshDimensions(3,"420px"),this.carouselOptions={items:3,dots:!1,nav:!0,slideBy:3})}trackByTrip(e,i){return e}navigateToNewTrip(){this.router.navigate([`${O.H.new_trip}/`])}ngOnDestroy(){this.store.dispatch((0,f.fb)()),this.subscriptions.unsubscribe()}refreshDimensions(e,i){this.columns=e,this.rowHeight=i}organizeTrips(e){this.onGoingTrip={},this.pastTrips=[],this.upcomingTrips=[];let i=p().add(7,"days").format("YYYY-MM-DD");e.forEach(r=>{r=Object.assign(Object.assign({},r),{summary_date:this.dateService.convertDates(r.departure_date,r.arrival_date)}),p().isSameOrAfter(r.departure_date)&&(p().isSameOrBefore(r.arrival_date)||p(i).isBefore(r.arrival_date))?this.onGoingTrip=r:p().isAfter(r.arrival_date)?this.pastTrips.push(r):p(i).isBefore(r.arrival_date)&&this.upcomingTrips.push(r)}),this.upcomingTrips=this.tripService.sortTrips(this.upcomingTrips,!0),this.pastTrips=this.tripService.sortTrips(this.pastTrips,!1)}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(I.a),t.\u0275\u0275directiveInject(k),t.\u0275\u0275directiveInject(u.F0),t.\u0275\u0275directiveInject(g.yh))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-dashboard"]],viewQuery:function(e,i){if(1&e&&t.\u0275\u0275viewQuery(Y,7,t.ViewContainerRef),2&e){let r;t.\u0275\u0275queryRefresh(r=t.\u0275\u0275loadQuery())&&(i.tripDialog=r.first)}},decls:27,vars:22,consts:[[1,"trips-container"],[1,"on-going-container"],[3,"title","trip",4,"ngIf"],[1,"upcoming-container","py-4"],[1,"mat-subheading-2"],[3,"addClick",4,"ngIf"],[3,"options","carouselClasses",4,"ngIf"],[1,"past-container","pb-4"],[3,"opened","closed"],[1,"p-0"],[1,"py-3","w-100",3,"rowHeight","cols","resize"],[4,"ngFor","ngForOf","ngForTrackBy"],["tripDialog",""],[3,"title","trip"],[3,"addClick"],[3,"options","carouselClasses"],[3,"trip","click",4,"ngFor","ngForOf","ngForTrackBy"],[3,"trip","click"],[1,"w-100",3,"trip","click"]],template:function(e,i){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1),t.\u0275\u0275template(2,F,1,2,"app-header-trip",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",3)(4,"p",4),t.\u0275\u0275text(5),t.\u0275\u0275pipe(6,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(7,j,1,0,"app-card-add-trip",5),t.\u0275\u0275template(8,H,3,5,"owl-carousel",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"div",7)(10,"mat-accordion")(11,"mat-expansion-panel",8),t.\u0275\u0275listener("opened",function(){return i.panelOpenState=!0})("closed",function(){return i.panelOpenState=!1}),t.\u0275\u0275elementStart(12,"mat-expansion-panel-header",9)(13,"mat-panel-title")(14,"p",4),t.\u0275\u0275text(15),t.\u0275\u0275pipe(16,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(17,"mat-panel-description"),t.\u0275\u0275text(18),t.\u0275\u0275pipe(19,"uppercase"),t.\u0275\u0275pipe(20,"translate"),t.\u0275\u0275pipe(21,"uppercase"),t.\u0275\u0275pipe(22,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(23,"mat-grid-list",10),t.\u0275\u0275listener("resize",function(d){return i.setDimensions(d.target)},!1,t.\u0275\u0275resolveWindow),t.\u0275\u0275template(24,R,2,1,"mat-grid-tile",11),t.\u0275\u0275elementEnd()()()()(),t.\u0275\u0275template(25,V,0,0,"ng-template",null,12,t.\u0275\u0275templateRefExtractor)),2&e&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",i.onGoingTrip),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(6,10,"content.upcoming-trip")),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",0===i.upcomingTrips.length),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.upcomingTrips.length>0),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(16,12,"content.past-trip")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",i.panelOpenState?t.\u0275\u0275pipeBind1(19,14,t.\u0275\u0275pipeBind1(20,16,"content.see-less")):t.\u0275\u0275pipeBind1(21,18,t.\u0275\u0275pipeBind1(22,20,"content.see-more"))," "),t.\u0275\u0275advance(5),t.\u0275\u0275property("rowHeight",i.rowHeight)("cols",i.columns),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",i.pastTrips)("ngForTrackBy",i.trackByTrip))},directives:[l.NgIf,y,B,T.OwlCarousel,l.NgForOf,E,m.pp,m.ib,m.yz,m.yK,m.u4,b.Il,b.DX],pipes:[h.X$,l.UpperCasePipe],styles:[".trips-container[_ngcontent-%COMP%]   .on-going-container[_ngcontent-%COMP%]{background:var(--color-background-tertiary)}.trips-container[_ngcontent-%COMP%]   .upcoming-container[_ngcontent-%COMP%]{border-top:1px solid var(--color-border-primary);border-bottom:1px solid var(--color-border-primary);margin:40px 122px;padding:24px 0}.trips-container[_ngcontent-%COMP%]   .past-container[_ngcontent-%COMP%]{border-bottom:1px solid var(--color-border-primary);margin:40px 122px;padding:24px 0}@media (max-width: 768px){.trips-container[_ngcontent-%COMP%]   .upcoming-container[_ngcontent-%COMP%], .trips-container[_ngcontent-%COMP%]   .past-container[_ngcontent-%COMP%]{margin:18px 40px}}@media (min-width: 768px) and (max-width: 992px){.trips-container[_ngcontent-%COMP%]   .upcoming-container[_ngcontent-%COMP%], .trips-container[_ngcontent-%COMP%]   .past-container[_ngcontent-%COMP%]{margin:24px 60px}}"]}),n})()}];let A=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[u.Bz.forChild(Q)],u.Bz]}),n})();var N=o(430);let X=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[A,N.m,T.OwlModule]]}),n})()}}]);